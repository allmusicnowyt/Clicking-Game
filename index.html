<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clicker Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #222, #555);
    color: white;
    overflow: hidden;
    display: flex;
  }
  #gameArea {
    flex: 1;
    text-align: center;
    padding: 20px;
  }
  #leaderboard {
    width: 250px;
    background: #333;
    padding: 10px;
    border-left: 3px solid gold;
    overflow-y: auto;
    max-height: 100vh;
  }
  h1 { font-size: 2em; margin-top: 20px; }
  button {
    background: #ff4747;
    border: none;
    color: white;
    padding: 12px 25px;
    margin: 5px;
    border-radius: 10px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover { background: #ff3030; transform: scale(1.05); }
  .store { margin-top: 20px; }
  .coin {
    position: absolute;
    width: 60px;
    height: 60px;
    background: radial-gradient(circle, gold 60%, #b8860b);
    border-radius: 50%;
    box-shadow: 0 0 15px gold;
    cursor: pointer;
  }
  .sparkle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: gold;
    border-radius: 50%;
    opacity: 0.8;
    pointer-events: none;
    animation: sparkleAnim 0.6s linear forwards;
  }
  @keyframes sparkleAnim {
    0% { transform: scale(1) translateY(0); opacity: 1; }
    100% { transform: scale(0) translateY(-50px); opacity: 0; }
  }
  .coin-spin {
    animation: spinHit 0.8s forwards;
  }
  @keyframes spinHit {
    0% { transform: rotate(0deg) scale(1); opacity: 1; }
    50% { transform: rotate(720deg) scale(1.5); opacity: 1; }
    100% { transform: rotate(1080deg) scale(0); opacity: 0; }
  }
</style>
</head>
<body>
<div id="gameArea">
  <h1>ðŸ”¥ Clicker Game ðŸ”¥</h1>
  <h2>Points: <span id="points">0</span></h2>
  <h3>Auto-clickers: <span id="autoClickers">0</span> | Click multipliers: <span id="clickMultipliers">0</span></h3>

  <button id="clickButton">Click Me!</button>

  <div class="store">
    <h3>Shop</h3>
    <button id="autoClickerBtn">Buy Auto Clicker (50 pts)</button>
    <button id="doubleClickBtn">Buy Click Multiplier (25 pts)</button>
  </div>

  <button id="submitScoreBtn">Submit Score</button>
  <button id="resetBtn" style="background:#444;">Reset Progress</button>
</div>

<div id="leaderboard">
  <h3>Global Leaderboard</h3>
  <div id="leaderboardEntries"></div>
</div>

<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="buySound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>
<audio id="coinSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
let points = parseInt(localStorage.getItem("points")) || 0;
let autoClickers = parseInt(localStorage.getItem("autoClickers")) || 0;
let clickMultipliers = parseInt(localStorage.getItem("clickMultipliers")) || 0;

const pointsDisplay = document.getElementById("points");
const autoClickersDisplay = document.getElementById("autoClickers");
const clickMultipliersDisplay = document.getElementById("clickMultipliers");
const clickButton = document.getElementById("clickButton");
const autoClickerBtn = document.getElementById("autoClickerBtn");
const doubleClickBtn = document.getElementById("doubleClickBtn");
const resetBtn = document.getElementById("resetBtn");
const submitScoreBtn = document.getElementById("submitScoreBtn");
const leaderboardEntries = document.getElementById("leaderboardEntries");

const clickSound = document.getElementById("clickSound");
const buySound = document.getElementById("buySound");
const coinSound = document.getElementById("coinSound");

// --- SHORT FORM ---
function formatShort(num) {
  if(num>=1e6){
    if(num>=1e24) return (num/1e24).toFixed(1)+"Y";
    if(num>=1e21) return (num/1e21).toFixed(1)+"Z";
    if(num>=1e18) return (num/1e18).toFixed(1)+"E";
    if(num>=1e15) return (num/1e15).toFixed(1)+"P";
    if(num>=1e12) return (num/1e12).toFixed(1)+"T";
    if(num>=1e9) return (num/1e9).toFixed(1)+"B";
    return (num/1e6).toFixed(1)+"M";
  }
  return num.toString();
}

// --- DISPLAY UPDATE ---
function updateDisplay(){
  pointsDisplay.textContent = formatShort(points);
  autoClickersDisplay.textContent = formatShort(autoClickers);
  clickMultipliersDisplay.textContent = formatShort(clickMultipliers);

  localStorage.setItem("points", points);
  localStorage.setItem("autoClickers", autoClickers);
  localStorage.setItem("clickMultipliers", clickMultipliers);
}

// Click
clickButton.addEventListener("click",()=>{
  clickSound.currentTime=0; clickSound.play();
  points += 1 + clickMultipliers;
  createSparkle(clickButton);
  updateDisplay();
});

// Shop
autoClickerBtn.addEventListener("click",()=>{ if(points>=50){ buySound.play(); points-=50; autoClickers+=1; updateDisplay(); }});
doubleClickBtn.addEventListener("click",()=>{ if(points>=25){ buySound.play(); points-=25; clickMultipliers+=1; updateDisplay(); }});

// Reset
resetBtn.addEventListener("click",()=>{ if(confirm("Reset all progress?")){ localStorage.clear(); points=0; autoClickers=0; clickMultipliers=0; updateDisplay(); }});

// Auto Clicker
setInterval(()=>{ if(autoClickers>0){ points+=autoClickers; updateDisplay(); } },1000);

// Sparkle effect
function createSparkle(element){
  const sparkle=document.createElement("div");
  sparkle.className="sparkle";
  const rect=element.getBoundingClientRect();
  sparkle.style.left=rect.left+rect.width/2+"px";
  sparkle.style.top=rect.top+"px";
  document.body.appendChild(sparkle);
  setTimeout(()=>sparkle.remove(),600);
}

// Random golden coin
function spawnCoin(){
  if(Math.random()<0.25){
    const coin=document.createElement("div");
    coin.classList.add("coin");
    coin.style.top=Math.random()*(window.innerHeight-100)+"px";
    coin.style.left=Math.random()*(window.innerWidth-100)+"px";
    document.body.appendChild(coin);

    coin.addEventListener("click",()=>{
      coinSound.currentTime=0; coinSound.play();
      points*=2; updateDisplay();
      coin.classList.add("coin-spin");

      const floatText=document.createElement("div");
      floatText.textContent="+"+formatShort(points);
      floatText.style.position="absolute";
      floatText.style.left=coin.style.left;
      floatText.style.top=coin.style.top;
      floatText.style.color="gold";
      floatText.style.fontWeight="bold";
      floatText.style.fontSize="20px";
      floatText.style.pointerEvents="none";
      floatText.style.opacity="1";
      document.body.appendChild(floatText);

      let top=parseInt(coin.style.top);
      let opacity=1;
      const anim=setInterval(()=>{
        top-=1; opacity-=0.02;
        floatText.style.top=top+"px"; floatText.style.opacity=opacity;
        if(opacity<=0){ clearInterval(anim); floatText.remove(); }
      },16);

      setTimeout(()=>coin.remove(),800);
    });

    setTimeout(()=>coin.remove(),4000);
  }
}
setInterval(spawnCoin,5000);

// Submit Score to Dreamlo
submitScoreBtn.addEventListener("click", ()=>{
  const playerName = prompt("Enter your name:", "Player");
  if(!playerName) return;

  // PRIVATE KEY
  const privateKey = "nQQcDbaRI0WCy5ReWthglQRb8dK3HlokiYy3WNiufC3w";
  const url = `http://dreamlo.com/lb/${privateKey}/add/${encodeURIComponent(playerName)}/${points}`;

  fetch(url)
    .then(() => alert("Score submitted successfully!"))
    .catch(() => alert("Failed to submit score."));
});

// Live Leaderboard
function updateLeaderboard(){
  const publicUrl = "http://dreamlo.com/lb/nQQcDbaRI0WCy5ReWthglQRb8dK3HlokiYy3WNiufC3w/pipe/";
  fetch(publicUrl)
    .then(res => res.text())
    .then(data => {
      leaderboardEntries.innerHTML = "";
      const lines = data.split("\n");
      lines.forEach((line,index)=>{
        if(line.trim()==="") return;
        const parts = line.split("|");
        const name = parts[0];
        const score = parts[1];
        const entry = document.createElement("div");
        entry.textContent = `${index+1}. ${name} - ${formatShort(parseInt(score))}`;
        leaderboardEntries.appendChild(entry);
      });
    })
    .catch(err=>console.error(err));
}
setInterval(updateLeaderboard,5000);
updateLeaderboard();

// Initial Display
updateDisplay();
</script>
</body>
</html>
